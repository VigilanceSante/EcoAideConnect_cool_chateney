{% extends layout_path %}

{% load static %}
{% load i18n %}

{% block title %}Tableau de Bord CoolChateney{% endblock %}

{% block vendor_css %}
{{ block.super }}
<link rel="stylesheet" href="{% static 'vendor/libs/apex-charts/apex-charts.css' %}" />
{% endblock %}

{% block vendor_js %}
{{ block.super }}
<script src="{% static 'vendor/libs/apex-charts/apexcharts.js' %}"></script>
{% endblock %}

{% block page_js %}
{{ block.super }}
<script src="{% static 'js/dashboards-analytics.js' %}"></script>
{% endblock %}

{% block content %}
<!-- Feuilles de style externes pour les icônes et les cartes -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

<style>
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background-color: #f4f7f9;
    color: #333;
    margin: 0;
    padding: 0;
  }

  .container {
    padding: 20px;
    max-width: 1200px;
    margin: auto;
  }

  .row {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
  }

  .card {
    position: relative;
    border: 1px solid #ccc;
    border-radius: 10px;
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    background-color: #fff;
    transition: all 0.3s ease;
    flex: 1 0 21%; /* Ajustez selon les points de rupture réactifs */
    padding: 20px;
    text-align: center;
  }

  .card:hover {
    box-shadow: 0 6px 16px rgba(0,0,0,0.15);
    transform: translateY(-5px);
  }

  .card-icon {
    font-size: 3rem;
    margin-bottom: 10px;
  }

  /* Infobulle améliorée */
  .tooltip-icon {
    position: absolute;
    top: 10px;
    right: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #888;
    font-size: 0.875rem;
    font-weight: bold;
    background-color: #e9ecef;
    border-radius: 50%;
    width: 24px;
    height: 24px;
    cursor: pointer;
    transition: background-color 0.3s ease, color 0.3s ease;
  }

  .tooltip-icon:hover {
    background-color: #007bff;
    color: #fff;
  }

  .tooltip-icon[data-toggle="tooltip"]::after {
    content: attr(title);
    display: none;
    position: absolute;
    top: -35px;
    right: 0;
    background-color: #333;
    color: #fff;
    padding: 5px 10px;
    border-radius: 5px;
    font-size: 0.75rem;
    font-weight: normal;
    white-space: nowrap;
    z-index: 10;
  }

  .tooltip-icon:hover::after {
    display: block;
  }

  @media (min-width: 576px) {
    .col-md-6 {
      flex: 0 0 50%;
    }
  }

  @media (min-width: 768px) {
    .col-lg-3 {
      flex: 0 0 25%;
    }
  }
</style>

<div class="container">
  <!-- Grille de 4 tuiles -->
  <div class="row">
    <!-- Tuile 1 : Température Actuelle -->
    <div class="col-12 col-md-6 col-lg-3 mb-4">
      <div class="card">
        <i class="fas fa-thermometer-half card-icon text-primary"></i>
        <div class="tooltip-icon" data-toggle="tooltip" title="Indique la température actuelle">?</div>
        <h5 class="card-title">Température Actuelle</h5>
        <p class="card-text">
          <span class="h1">25&deg;C</span><br>
          <small class="text-muted">Données factices pour démonstration</small>
        </p>
        <p>
          Max : 30&deg;C, Min : 20&deg;C<br>
          Humidité : 60%
        </p>
        <div class="alert alert-info">
          Portez des vêtements légers et restez hydraté.
        </div>
      </div>
    </div>

    <!-- Tuile 2 : Indice de Pollution -->
    <div class="col-12 col-md-6 col-lg-3 mb-4">
      <div class="card">
        <i class="fas fa-smog card-icon text-info"></i>
        <div class="tooltip-icon" data-toggle="tooltip" title="Qualité globale de l'air actuellement">?</div>
        <h5 class="card-title">Indice de Pollution</h5>
        <p class="card-text">
          <span class="h1">Modéré</span><br>
          <small class="text-muted">Qualité de l'air globale</small>
        </p>
      </div>
    </div>

    <!-- Tuile 3 : Niveau d'Ozone (O3) -->
    <div class="col-12 col-md-6 col-lg-3 mb-4">
      <div class="card">
        <i class="fas fa-cloud-sun card-icon text-warning"></i>
        <div class="tooltip-icon" data-toggle="tooltip" title="Concentration d'ozone (O3) dans l'air">?</div>
        <h5 class="card-title">Niveau d'Ozone (O3)</h5>
        <p class="card-text">
          <span class="h1">120</span><br>
          <small class="text-muted">Concentration dans l'air</small>
        </p>
      </div>
    </div>

    <!-- Tuile 4 : Particules PM10 -->
    <div class="col-12 col-md-6 col-lg-3 mb-4">
      <div class="card">
        <i class="fas fa-smog card-icon text-success"></i>
        <div class="tooltip-icon" data-toggle="tooltip" title="Niveau de particules fines PM10">?</div>
        <h5 class="card-title">Particules PM10</h5>
        <p class="card-text">
          <span class="h1">150</span><br>
          <small class="text-muted">Matières particulaires dans l'air</small>
        </p>
      </div>
    </div>
  </div>
</div>
{% endblock %}
